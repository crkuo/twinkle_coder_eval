graph TB
    subgraph "ğŸ¯ User Interface Layer"
        CLI[["ğŸ–¥ï¸ Command Line Interface<br/>tools/run_evaluation.py"]]
        CONFIG[["âš™ï¸ Configuration Files<br/>configs/*.yml"]]
    end
    
    subgraph "ğŸš€ Engine Layer - Core Orchestration"
        REGISTRY[["ğŸ“‹ Registry System<br/>engine/registry.py<br/>â€¢ Dynamic Loading<br/>â€¢ Component Discovery<br/>â€¢ Auto Registration"]]
        CONFIGMGR[["ğŸ”§ Config Manager<br/>engine/config.py<br/>â€¢ YAML Processing<br/>â€¢ Parameter Validation<br/>â€¢ Inheritance Support"]]
        ORCHESTRATOR[["ğŸµ Evaluation Orchestrator<br/>tools/run_evaluation.py<br/>â€¢ Multi-benchmark Coordination<br/>â€¢ Result Aggregation<br/>â€¢ Parameter-based Directories"]]
    end
    
    subgraph "ğŸ”Œ Backend Layer - Model Inference"
        BACKEND_BASE[["ğŸ—ï¸ Generator Base<br/>backend/base.py"]]
        OPENAI[["ğŸ¤– OpenAI Backend<br/>backend/openai/<br/>â€¢ API Integration<br/>â€¢ Chat/Completion<br/>â€¢ Error Handling"]]
        VLLM[["âš¡ vLLM Backend<br/>backend/vllm/<br/>â€¢ High Performance<br/>â€¢ Local Models<br/>â€¢ Batch Processing"]]
        MOCK[["ğŸ­ Mock Backend<br/>backend/mock/<br/>â€¢ Testing Support<br/>â€¢ CI/CD Integration"]]
        CUSTOM_BACKEND[["ğŸ”§ Custom Backend<br/>Extensible..."]]
    end
    
    subgraph "ğŸ“Š Benchmark Layer - Evaluation Tasks"
        BENCHMARK_BASE[["ğŸ“ Benchmark Base<br/>benchmark/base.py"]]
        MBPP[["ğŸ“ MBPP<br/>benchmark/MBPP/<br/>â€¢ Python Problems<br/>â€¢ 374 Tasks"]]
        HUMANEVAL[["ğŸ§‘â€ğŸ’» HumanEval<br/>benchmark/HumanEval/<br/>â€¢ Function Completion<br/>â€¢ 164 Tasks"]]
        BIGCODEBENCH[["ğŸ¢ BigCodeBench<br/>benchmark/BigCodeBench/<br/>â€¢ Complex Projects<br/>â€¢ 1140+ Tasks"]]
        LEETCODE[["ğŸ§® LeetCode<br/>benchmark/LeetCode/<br/>â€¢ Algorithm Problems<br/>â€¢ 300+ Tasks"]]
        CUSTOM_BENCHMARK[["ğŸ“Š Custom Benchmark<br/>Extensible..."]]
    end
    
    subgraph "ğŸ›¡ï¸ Execution Layer - Safe Code Running"
        SANITIZER[["ğŸ§¹ Code Sanitizer<br/>sanitize.py<br/>â€¢ Python Extraction<br/>â€¢ Code Cleaning"]]
        EXECUTOR[["ğŸ”’ Safe Executor<br/>eval/execution.py<br/>â€¢ Sandboxed Execution<br/>â€¢ Timeout Protection<br/>â€¢ Resource Limits"]]
        METRICS[["ğŸ“ˆ Metrics Calculator<br/>utils.py<br/>â€¢ Pass@k Evaluation<br/>â€¢ Success Rates"]]
    end
    
    subgraph "ğŸ’¾ Data Layer"
        CACHE[["ğŸ—ƒï¸ Dataset Cache<br/>cache/<br/>â€¢ Local Storage<br/>â€¢ Auto Download"]]
        RESULTS[["ğŸ“ Results Storage<br/>result/<br/>â€¢ Structured Output<br/>â€¢ JSON/JSONL Format"]]
        METADATA[["ğŸ“‹ Metadata<br/>metafile.yml<br/>â€¢ Benchmark Info<br/>â€¢ Paper References"]]
    end
    
    %% User Flow
    CLI --> CONFIG
    CONFIG --> CONFIGMGR
    CLI --> ORCHESTRATOR
    
    %% Engine Layer Connections
    ORCHESTRATOR --> REGISTRY
    ORCHESTRATOR --> CONFIGMGR
    REGISTRY -.->|"Dynamic Loading"| BACKEND_BASE
    REGISTRY -.->|"Dynamic Loading"| BENCHMARK_BASE
    
    %% Backend Registration
    BACKEND_BASE --> OPENAI
    BACKEND_BASE --> VLLM
    BACKEND_BASE --> MOCK
    BACKEND_BASE --> CUSTOM_BACKEND
    
    %% Benchmark Registration  
    BENCHMARK_BASE --> MBPP
    BENCHMARK_BASE --> HUMANEVAL
    BENCHMARK_BASE --> BIGCODEBENCH
    BENCHMARK_BASE --> LEETCODE
    BENCHMARK_BASE --> CUSTOM_BENCHMARK
    
    %% Execution Flow
    ORCHESTRATOR --> BACKEND_BASE
    ORCHESTRATOR --> BENCHMARK_BASE
    BACKEND_BASE --> SANITIZER
    SANITIZER --> EXECUTOR
    EXECUTOR --> METRICS
    METRICS --> RESULTS
    
    %% Data Flow
    BENCHMARK_BASE --> CACHE
    BENCHMARK_BASE --> METADATA
    CACHE -.->|"Dataset Loading"| BENCHMARK_BASE
    
    %% Styling
    classDef userLayer fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef engineLayer fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef backendLayer fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef benchmarkLayer fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef executionLayer fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef dataLayer fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    
    class CLI,CONFIG userLayer
    class REGISTRY,CONFIGMGR,ORCHESTRATOR engineLayer
    class BACKEND_BASE,OPENAI,VLLM,MOCK,CUSTOM_BACKEND backendLayer
    class BENCHMARK_BASE,MBPP,HUMANEVAL,BIGCODEBENCH,LEETCODE,CUSTOM_BENCHMARK benchmarkLayer
    class SANITIZER,EXECUTOR,METRICS executionLayer
    class CACHE,RESULTS,METADATA dataLayer